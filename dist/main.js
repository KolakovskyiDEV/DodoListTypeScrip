(()=>{console.log("hi");let e=new class{constructor(){}getData(){return!!a.getDataModel()&&JSON.parse(a.getDataModel())}setData(t){const n=e.handleInputs(t);return a.saveData(n),n}handleInputs(e){const t={};for(const a of e)t[a.name]=a.value;return t.checkbox=!1,t.completed="false",t}makeCheckBox(t){let n=Number(t.target.parentElement.id);const o=e.getData();return o[n].completed="true",o[n].checkbox=!o[n].checkbox,a.reSetData(o),o}deletElem(t){let n=Number(t.target.parentElement.id);const o=e.getData();return o.splice(n,1),a.reSetData(o),o}deletAllElem(t){a.countOfNumber=0;const n=e.getData();return a.removeData(),n}},t=new class{constructor(){this.form=document.querySelector("#todoForm"),this.template=document.querySelector("#todoItems"),this.removeAll=document.querySelector("#todoForm")}setEvents(){window.addEventListener("load",t.onLoadFunc),this.form.addEventListener("submit",t.formSubmit),this.template.addEventListener("change",t.checkBoxFunc),this.template.addEventListener("click",t.deletElemFunc),this.removeAll.addEventListener("click",t.deletAllFunc)}formSubmit(a){a.preventDefault();const n=a.target.querySelectorAll("input, textarea");for(const e of n)if(!e.value.length)return alert("No way you can add this shit");e.setData(n);const o=e.getData()[e.getData().length-1];t.renderItem(o),a.target.reset()}onLoadFunc(){if(!localStorage.getItem("saved_data"))return!1;a.countOfNumber=0,e.getData().forEach((e=>t.renderItem(e)))}checkBoxFunc(a){e.makeCheckBox(a),t.template.textContent="",t.onLoadFunc()}deletElemFunc(a){"taskButton"===a.target.className&&(e.deletElem(a),t.template.innerHTML="",t.onLoadFunc())}deletAllFunc(a){console.log(a.target),"del"===a.target.className&&(e.deletAllElem(a),t.template.innerHTML="")}createTemplate(e="",t="",n="",o=!1,c="Delete element"){const r=document.createElement("div");r.className="col-4";const l=document.createElement("div");l.className="taskWrapper",l.id=a.countOfNumber++,r.append(l);const s=document.createElement("div");s.innerHTML=e,s.className="taskHeading",l.append(s);const m=document.createElement("div");m.innerHTML=t,m.className="taskDescription",l.append(m);const d=document.createElement("div");d.innerHTML=n,d.className="taskCompleted",l.append(d);const u=document.createElement("input");u.type="checkbox",u.checked=o,u.className="taskCheckbox",l.append(u);const i=document.createElement("button");return i.innerHTML=c,i.className="taskButton",l.append(i),r}renderItem({title:e,description:a,completed:n,checkbox:o}){const c=t.createTemplate(e,a,n,o);document.querySelector("#todoItems").prepend(c)}creatDeleteAllButt(e="Delete All"){const t=document.createElement("button"),a=document.querySelector("#todoForm"),n=document.createElement("span"),o=document.createElement("span");t.append(n),n.append(o),n.className="buttonDel__text",o.innerHTML=e,o.className="del",t.className="buttonDel",t.setAttribute("type","button"),a.append(t),console.log(t)}},a=new class{constructor(){this.dbName="saved_data"}_countOfNumber=0;get countOfNumber(){return this._countOfNumber}set countOfNumber(e){this._countOfNumber=e}saveData(e){if(localStorage[this.dbName]){const t=JSON.parse(localStorage[this.dbName]);return t.push(e),localStorage.setItem(this.dbName,JSON.stringify(t)),t}const t=[e];return localStorage.setItem(this.dbName,JSON.stringify(t)),t}getDataModel(){return!!localStorage.getItem(this.dbName)&&localStorage.getItem(this.dbName)}reSetData(e){localStorage.clear(),localStorage.setItem(this.dbName,JSON.stringify(e))}removeData(){localStorage.clear()}};t.setEvents(),t.creatDeleteAllButt()})();